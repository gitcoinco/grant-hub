var R=e=>typeof e=="function",d=(e,t)=>R(e)?e(t):e;var E=(()=>{let e=0;return()=>(++e).toString()})();var C=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})();import{useEffect as V,useState as h}from"react";var _=20;var p=new Map,P=e=>{if(p.has(e))return;let t=setTimeout(()=>{p.delete(e),T({type:4,toastId:e})},1e3);p.set(e,t)},x=e=>{let t=p.get(e);t&&clearTimeout(t)},y=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,_)};case 1:return t.toast.id&&x(t.toast.id),{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case 2:let{toast:o}=t;return e.toasts.find(r=>r.id===o.id)?y(e,{type:1,toast:o}):y(e,{type:0,toast:o});case 3:let{toastId:i}=t;return i?P(i):e.toasts.forEach(r=>{P(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===i||i===void 0?{...r,visible:!1}:r)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+s}))}}},m=[],f={toasts:[],pausedAt:void 0},T=e=>{f=y(f,e),m.forEach(t=>{t(f)})},I={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},g=(e={})=>{let[t,o]=h(f);V(()=>(m.push(o),()=>{let s=m.indexOf(o);s>-1&&m.splice(s,1)}),[t]);let i=t.toasts.map(s=>{var r,n;return{...e,...e[s.type],...s,duration:s.duration||((r=e[s.type])==null?void 0:r.duration)||(e==null?void 0:e.duration)||I[s.type],style:{...e.style,...(n=e[s.type])==null?void 0:n.style,...s.style}}});return{...t,toasts:i}};var v=(e,t="blank",o)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...o,id:(o==null?void 0:o.id)||E()}),c=e=>(t,o)=>{let i=v(t,e,o);return T({type:2,toast:i}),i.id},a=(e,t)=>c("blank")(e,t);a.error=c("error");a.success=c("success");a.loading=c("loading");a.custom=c("custom");a.dismiss=e=>{T({type:3,toastId:e})};a.remove=e=>T({type:4,toastId:e});a.promise=(e,t,o)=>{let i=a.loading(t.loading,{...o,...o==null?void 0:o.loading});return e.then(s=>(a.success(d(t.success,s),{id:i,...o,...o==null?void 0:o.success}),s)).catch(s=>{a.error(d(t.error,s),{id:i,...o,...o==null?void 0:o.error})}),e};import{useEffect as U,useMemo as F}from"react";var w=e=>{let{toasts:t,pausedAt:o}=g(e);U(()=>{if(o)return;let s=Date.now(),r=t.map(n=>{if(n.duration===1/0)return;let l=(n.duration||0)+n.pauseDuration-(s-n.createdAt);if(l<0){n.visible&&a.dismiss(n.id);return}return setTimeout(()=>a.dismiss(n.id),l)});return()=>{r.forEach(n=>n&&clearTimeout(n))}},[t,o]);let i=F(()=>({startPause:()=>{T({type:5,time:Date.now()})},endPause:()=>{o&&T({type:6,time:Date.now()})},updateHeight:(s,r)=>T({type:1,toast:{id:s,height:r}}),calculateOffset:(s,r)=>{let{reverseOrder:n=!1,gutter:l=8,defaultPosition:O}=r||{},S=t.filter(u=>(u.position||O)===(s.position||O)&&u.height),b=S.findIndex(u=>u.id===s.id),D=S.filter((u,A)=>A<b&&u.visible).length;return S.filter(u=>u.visible).slice(...n?[D+1]:[0,D]).reduce((u,A)=>u+(A.height||0)+l,0)}}),[t,o]);return{toasts:t,handlers:i}};var re=a;export{re as default,d as resolveValue,a as toast,w as useToaster,g as useToasterStore};
//# sourceMappingURL=index.mjs.map