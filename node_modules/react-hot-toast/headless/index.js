"use strict";var D=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var M=Object.prototype.hasOwnProperty;var v=(e,t)=>{for(var o in t)D(e,o,{get:t[o],enumerable:!0})},U=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of I(t))!M.call(e,r)&&r!==o&&D(e,r,{get:()=>t[r],enumerable:!(n=x(t,r))||n.enumerable});return e};var F=e=>U(D({},"__esModule",{value:!0}),e);var B={};v(B,{default:()=>Q,resolveValue:()=>c,toast:()=>a,useToaster:()=>h,useToasterStore:()=>A});module.exports=F(B);var w=e=>typeof e=="function",c=(e,t)=>w(e)?e(t):e;var R=(()=>{let e=0;return()=>(++e).toString()})();var q=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})();var S=require("react"),k=20;var p=new Map,V=e=>{if(p.has(e))return;let t=setTimeout(()=>{p.delete(e),T({type:4,toastId:e})},1e3);p.set(e,t)},N=e=>{let t=p.get(e);t&&clearTimeout(t)},E=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,k)};case 1:return t.toast.id&&N(t.toast.id),{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:o}=t;return e.toasts.find(s=>s.id===o.id)?E(e,{type:1,toast:o}):E(e,{type:0,toast:o});case 3:let{toastId:n}=t;return n?V(n):e.toasts.forEach(s=>{V(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+r}))}}},m=[],f={toasts:[],pausedAt:void 0},T=e=>{f=E(f,e),m.forEach(t=>{t(f)})},C={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},A=(e={})=>{let[t,o]=(0,S.useState)(f);(0,S.useEffect)(()=>(m.push(o),()=>{let r=m.indexOf(o);r>-1&&m.splice(r,1)}),[t]);let n=t.toasts.map(r=>{var s,i;return{...e,...e[r.type],...r,duration:r.duration||((s=e[r.type])==null?void 0:s.duration)||(e==null?void 0:e.duration)||C[r.type],style:{...e.style,...(i=e[r.type])==null?void 0:i.style,...r.style}}});return{...t,toasts:n}};var L=(e,t="blank",o)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...o,id:(o==null?void 0:o.id)||R()}),l=e=>(t,o)=>{let n=L(t,e,o);return T({type:2,toast:n}),n.id},a=(e,t)=>l("blank")(e,t);a.error=l("error");a.success=l("success");a.loading=l("loading");a.custom=l("custom");a.dismiss=e=>{T({type:3,toastId:e})};a.remove=e=>T({type:4,toastId:e});a.promise=(e,t,o)=>{let n=a.loading(t.loading,{...o,...o==null?void 0:o.loading});return e.then(r=>(a.success(c(t.success,r),{id:n,...o,...o==null?void 0:o.success}),r)).catch(r=>{a.error(c(t.error,r),{id:n,...o,...o==null?void 0:o.error})}),e};var y=require("react");var h=e=>{let{toasts:t,pausedAt:o}=A(e);(0,y.useEffect)(()=>{if(o)return;let r=Date.now(),s=t.map(i=>{if(i.duration===1/0)return;let d=(i.duration||0)+i.pauseDuration-(r-i.createdAt);if(d<0){i.visible&&a.dismiss(i.id);return}return setTimeout(()=>a.dismiss(i.id),d)});return()=>{s.forEach(i=>i&&clearTimeout(i))}},[t,o]);let n=(0,y.useMemo)(()=>({startPause:()=>{T({type:5,time:Date.now()})},endPause:()=>{o&&T({type:6,time:Date.now()})},updateHeight:(r,s)=>T({type:1,toast:{id:r,height:s}}),calculateOffset:(r,s)=>{let{reverseOrder:i=!1,gutter:d=8,defaultPosition:P}=s||{},g=t.filter(u=>(u.position||P)===(r.position||P)&&u.height),_=g.findIndex(u=>u.id===r.id),b=g.filter((u,O)=>O<_&&u.visible).length;return g.filter(u=>u.visible).slice(...i?[b+1]:[0,b]).reduce((u,O)=>u+(O.height||0)+d,0)}}),[t,o]);return{toasts:t,handlers:n}};var Q=a;0&&(module.exports={resolveValue,toast,useToaster,useToasterStore});
//# sourceMappingURL=index.js.map